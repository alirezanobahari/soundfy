import { DEV_DB_URL } from "./src/common/constants";
import mongoose from "mongoose";
import Bot from "./src/bot/bot";
import { botApi, commandProcessor } from "./dependencies-provider";

/////////////////////////////////////////////////////////////
// Connect to mongodb
/////////////////////////////////////////////////////////////
mongoose.connect(DEV_DB_URL, { useNewUrlParser: true });
mongoose.Promise = global.Promise;
const db = mongoose.connection;
db.on("error", console.error.bind(console, "MongoDB connection error:"));
/////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////
// Run bot
/////////////////////////////////////////////////////////////
new Bot(botApi, commandProcessor);
/////////////////////////////////////////////////////////////

console.log(process.platform);
console.log(process.arch);

